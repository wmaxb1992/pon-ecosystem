# Epic AI Terminal - Render.com Configuration

## Services to Create on Render.com

### 1. Web Service (Main Terminal)
- **Name**: epic-ai-terminal-web
- **Environment**: Python 3.11
- **Build Command**: `chmod +x render-build.sh && ./render-build.sh`
- **Start Command**: `python render_main.py`
- **Port**: Use PORT environment variable
- **Instance Type**: Starter (512MB RAM) or higher

### 2. Redis Instance
- **Name**: epic-ai-terminal-redis
- **Plan**: Free tier (25MB) for development
- **Connect to web service via REDIS_URL environment variable

### 3. Background Service (Workers)
- **Name**: epic-ai-terminal-workers
- **Environment**: Python 3.11
- **Build Command**: `chmod +x render-build.sh && ./render-build.sh`
- **Start Command**: `celery -A ai_multi_worker worker --loglevel=info`
- **Instance Type**: Starter or higher

## Environment Variables

Set these in your Render.com dashboard:

### Required
```
GROK_API_KEY=xai-E7Ml5WgMcMYT0lxew2n1b6EwlD8oD3x8OOVuX4OvxSUI9IvLhT2B3ZpESW52N50l2qBNckXyRRkEzv6N
GROK_MODEL=grok-3-fast
REDIS_URL=[Auto-generated by Redis service]
```

### Optional
```
SSH_PASSWORD=your-secure-password
ENABLE_SSH=true
SENTRY_DSN=your-sentry-dsn
LOG_LEVEL=INFO
```

## Deployment Steps

### 1. Connect GitHub Repository
1. Fork or create repository with these files
2. Connect to Render.com dashboard
3. Create new Web Service from repository

### 2. Configure Build
- **Build Command**: `./render-build.sh`
- **Start Command**: `python render_main.py`
- **Python Version**: 3.11

### 3. Add Redis
1. Create new Redis instance
2. Connect to web service
3. Copy REDIS_URL to environment variables

### 4. Deploy Workers (Optional)
1. Create new Background Worker service
2. Use same repository
3. Set start command: `celery -A ai_multi_worker worker --loglevel=info`

### 5. Set Environment Variables
Add all required environment variables in Render dashboard

## Usage After Deployment

### Web Interface
- Access via browser: `https://your-app.onrender.com`
- Shows status and connection information

### SSH Access (if enabled)
```bash
ssh -p 22 user@your-app.onrender.com
# Enter password when prompted
```

### API Access
```bash
curl https://your-app.onrender.com/health
```

## File Structure for Repository

```
epic-ai-terminal/
├── render_main.py              # Main entry point
├── epic_terminal_ui.py         # Rich terminal interface
├── ssh_server_render.py        # SSH server (optional)
├── ai_multi_worker.py          # Multi-worker system
├── enhanced_grok_integration.py # Grok AI client
├── requirements_render.txt     # Dependencies
├── render-build.sh            # Build script
├── README_RENDER.md           # This file
└── .gitignore                 # Git ignore file
```

## Auto-Deploy on Master Branch

### GitHub Actions (Optional)
Create `.github/workflows/deploy.yml`:

```yaml
name: Deploy to Render
on:
  push:
    branches: [ master, main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Trigger Render Deploy
      run: |
        curl -X POST "https://api.render.com/deploy/srv-YOUR-SERVICE-ID?key=YOUR-DEPLOY-KEY"
```

### Render Auto-Deploy
1. Go to service settings in Render dashboard
2. Enable "Auto-Deploy" for master branch
3. Every push to master will trigger automatic deployment

## Monitoring and Logs

### View Logs
```bash
# In Render dashboard
Logs tab → Live logs

# Or via CLI (if available)
render logs your-service-name
```

### Health Checks
Render automatically monitors:
- HTTP health checks on `/health` endpoint
- Service uptime and response times
- Memory and CPU usage

## Scaling

### Manual Scaling
- Increase instance type in Render dashboard
- Add more worker instances for parallel processing

### Auto-Scaling
- Available on paid plans
- Configure based on CPU/memory thresholds

## Estimated Costs

### Free Tier
- Web Service: 750 hours/month free
- Redis: 25MB free
- Background Worker: 750 hours/month free

### Paid Plans
- Starter: $7/month per service
- Standard: $25/month per service
- Pro: $85/month per service

## Troubleshooting

### Common Issues
1. **Build fails**: Check build logs, ensure dependencies in requirements.txt
2. **Redis connection**: Verify REDIS_URL environment variable
3. **SSH not working**: Ensure SSH_PASSWORD is set
4. **Grok API fails**: Verify GROK_API_KEY is correct

### Debug Commands
```bash
# Check environment
python -c "import os; print(os.environ.get('GROK_API_KEY', 'Not set'))"

# Test Redis
python -c "import redis; r=redis.from_url(os.environ['REDIS_URL']); print(r.ping())"

# Test Grok API
curl -H "Authorization: Bearer $GROK_API_KEY" https://api.x.ai/v1/models
```

## Support

For issues with:
- **Render.com**: Check Render documentation and support
- **Epic Terminal**: Review logs and GitHub issues
- **Grok AI**: Verify API key and model availability
